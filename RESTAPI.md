# RESTAPI

## REST
### 구성
Resource(자원), Verb(자원에 대한 행위), Representation(행위의 내용) 으로 구성된다.
### 정의
**Representational State Transfer**
www과 같은 분산 하이퍼미디어 시스템을 위한 소프트웨어 아키텍쳐중 한 형식이다.
REST는 웹 기술와 HTTP프로토콜을 사용해서 웹의 장점을 최대한 활용이 가능하다.
또한, 네트워크 상에서 Client-Server사이의 통신 방식 중 하나이다.

자원을 이름으로 구분하여 해당 자원의 상태를 주고받는 모든 것을 의미한다고 보면 된다.
>자원의 표현 : 데이터 페이스의 '학생'정보를 자원이라고 하면 이를 지칭하는 '학생'이 자원의 표현

>상태 전달 : JSON, XML을 통해 데이터가 요청되는 시점의 상태를 제공한다.

### 개념
HTTP URI를 통해 자원을 명시하고, HTTP Method를 통해 해당 자원에 대한 CRUD를 적용하는 것
> 즉, 자원 위주의 ROA(Resource Oriented Architecture)설계를 HTTP Method를 통해 지원을 처리하도록 설계한 아키텍쳐이다
### 특징
1. Server - Client 구조
2. Stateless (무상태)
3. Cacheable (캐시 처리 가능)
4. Layered System (계층화)
5. Uniform Interface (인터페이스 일관성)
---
#### 서버 - 클라이언트 구조
정보를 제공할 (저장하고 있는) PC를 Server, 정보를 요청할 사용자를 Client로 통신을 하는 구조다.
#### Stateless
Server는 Client의 정보를 저장하고 있으면 안된다. 저장하면 안되는 이유는 정말 많지만, 쉽게 비유해 보자면 state를 저장하게되면 다음과 같은 일이 벌어진다.
> 손님 A가 매장에 가서 물건을 구입하고자 한다. -> 점원 B가 A를 응대한다 -> A는 자신이 구매할 물건의 정보를 순차적으로 알려준다 (이거 구매 할께요, 몇개 구매 할꼐요) -> B는 해당 정보를 순차적으로 받으며 저장한다 -> B는 완성된 주문을 통해 물건을 결제한다.

위처럼 구매 프로세스가 작동하면 별 문제는 없지만 다음과 같이 진행될 가능성이 있다.
> 손님 A가 매장에 가서 물건을 구입하고자 한다. -> 점원 B가 A를 응대한다 -> A는 자신이 구매할 물건의 정보를 순차적으로 알려준다 (이거 구매 할께요, 몇개 구매 할꼐요) -> B는 해당 정보를 순차적으로 받으며 저장한다. -> B에게 일이 생겨 점원이 C로 바뀐다. -> A는 주문을 마치고 결제를 시도했지만 C는 아무것도 아는게 없다.

이게 서버가 State를 보관하면 발생하는 문제점이다. 그렇다면 Stateless는?
> 손님 A가 매장에 가서 물건을 구입하고자 한다. -> 점원 B가 A를 응대한다 -> A는 자신이 구매할 물건의 정보를 순차적으로 알리는게 아닌, 누적으로 알린다 (이거 구매 할께요, 이거 몇개 구매 할꼐요)-> B에게 일이 생겨 점원이 C로 바뀐다. -> A는 주문을 마치고 결제하기 위해 다음과 같이 말한다. (이거 몇개를 신용카드로 결제요) -> 점원이 누가 오든 결제만 해주면 된다. 

 여기서 손님은 클라이언트, 점원은 응답 서버다. 결국, Stateless를 유지하면 서버를 무한히 증설 할 수 있다.
 이를 스케일 아웃이라 한다.

근데 애초에 HTTP 프로토콜이 무상태 프로토콜이므로 당연히 REST도 무상태다

#### Cacheable
먼저 Cache는 임시 저장 장소다. 자주 사용되는 데이터를 위주로 저장하여 데이터에 대한 접근 속도를 향상시키기 위해 존재한다.
hit에 성공하면 응답을 매우매우 빠르게 할 수 있고, miss되면 아쉬운것.
>즉, 캐시 사용은 서버의 응답시간, 성능, 자원 이용률을 향상시키는 효과가 있다.

그렇다면 Cacheable은? 앞서 말한 캐시를 사용하게 하는 것이다.
#### Layered System 
클라이언트는 Server중에서 REST API만 호출한다.
REST Server를 구조를 계층화 하게 되면 기능을 층층이 분산해서 구조상의 유연함을 챙길 수 있다. 

또한 로드 밸런싱, 공유 캐시등을 통해서 확장성과 보안성까지 챙길 수 있으며

네트워크(Proxy, GateWay)기반의 중간 매체를 사용할 수 있게 된다.

#### Uniform Interface
URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행한다는 뜻.